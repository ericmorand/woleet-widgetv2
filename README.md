# Woleet widgets (version 2)

## Installation

```bash
npm i
```

# File Hasher widget

This widget allows to drop or download a file, compute its hash and preview it.

## Initialization

To integrate one or several widgets in a web page, first insert the following code:

```bash
<script>
  (function (d,s,i,f) {
    var js = d.createElement(s); var fjs = d.getElementsByTagName(s)[0];
    js.id = i; js.src = f; js.async = 1; fjs.parentNode.insertBefore(js, fjs);
  }(document, 'script', 'file-hasher-widget', '<url_to_script>/file-hasher-widget.js'));
</script>
```

Note that you need to replace *<url_to_script>* with the actual path of the script.

Then, instantiate each widget by creating a <b>div</b>:

```html
<div class="file-hasher-widget"></div>
```

## Configuration

### Available configuration options

The following options are available:

* __lang__ - defines the language of the widget (the HTML page language is used by default)

* __id__ - ID of the widget (widgetId). If it isn't defined it will be generated by the widget (f.e. _file-hasher-widget-00becbf7-f2d5-37c5-1b48-961c7389c900_)

* __title__ - allows change title options.
    
    * _visible_ - if *false* the title is hidden; *DEFAULT*: __*true*__

* __styles__ - possible style options.
    
    * _width_ - the width of the widget;
    
    * _iconWidth_ - the width of icons inside the widget;
    
* __provenfile__ - the option to predefine the downloadable file;
    
    * _url_ - the url of the file;
    
    * _fastDownload_ - download the file as soon as the widget is initialized;

* __observers__
    
    * _fileDownloaded_ - the callback is called once  the file is downloaded. Parameters: widgetId, downloaded file;
    
    * _hashCalculated_ - the callback is called once  the file is hashed. Parameters: widgetId, hash;

### Configuration ways

There are several ways to configure the widget:

* All parameters are in the attribute <b>config</b> as JSON object:

```html
<div class="file-hasher-widget" config='{"provenFile": {"url": "http://pngimg.com/uploads/google/google_PNG19644.png"}, "styles": {"width": 250}, "observers": {"hashCalculated": "hashCalculated", "fileDownloaded": "fileDownloadedObserver"}}'></div>
```
* The parameters are attributes of the HTML element:

```html
<div class='file-hasher-widget'
     lang='fr'
     styles='{"width": 150}'
     provenfile='{"url": "http://pngimg.com/uploads/google/google_PNG19634.png", "fastDownload": true}'
     observers='{"hashCalculated": "test.hashCalculated"}'></div>
 ```
* If a option has nested options they can be set also as HTML attributes by joining via '-' in lower case:

```html
<div class='file-hasher-widget' id='file-hasher-widget-de'
     observers-hashCalculated='window.hashCalculated'
     styles-width='270'
     lang='de'></div>
```

The dynamic initialization is also available. It is realized using the method __init__ of the widget. The an example in the file [examples/file-hasher-widget-delayed-several-instances-example.html](examples/file-hasher-widget-delayed-several-instances-example.html)

```html
<div class='file-hasher-widget' id='file-hasher-widget-de'
     observers-hashCalculated='window.hashCalculated'
     styles-width='270'
     lang='de'></div>
```

## Basic usage

See [examples/file-hasher-widget-example.html](examples/file-hasher-widget-example.html) for an example about how to insert this widget in a web page.

## Angular2+ usage

Go examples/angular2/file-hasher-widget and read [README.md](examples/angular2/file-hasher-widget/README.md) to install and run the demo Angular2+ application.
Also see the HTML file [index.html](examples/angular2/file-hasher-widget/src/index.html) and [app.component.html](examples/angular2/file-hasher-widget/src/app/app.component.html)
for an example about how to insert this widget in an Angular2+ application.

An example of a working Angular2 + component using a widget can be found in the [components](examples/angular2/file-hasher-widget/src/app/components) directory.

# Download Proxy Server

To allow the widget to download the file, the file URL must be proxied or the URL must support CORS.

For testing, a Node.js server is provided. This simple server simply redirect the resource flow to the widget.
Execute next command to launch the server:

```bash
cd ./server
node app
```

# Proof Verifier widget

This widget focuses on proof verification and displaying.
